<script>
/*
 * This gets copied for each iteration of form_for... not a good practice
 * however, neccessary because we use f.file_field in the ruby of addAttachment
 * if we could find a way to pass that information in we could not copy
 * pass it in as a string?  since we use it as a string anyway...
 */
removeAttachment = function(removeButton) {
	removeButton.up().remove();
}

addAttachment = function() {
    //need to change so that there is no bottom margin for GUI goodness
	var host = $('attachments');
    var editor = document.createElement('span');
	editor.innerHTML =
	    '<%= file_field_tag "content[content_attachments][]", :class => "formField" %>' +
    	'<input type="button" value="Remove" onclick="removeAttachment(this)" />';
	host.appendChild(editor);
}
//*/
</script>
<% fields_for content do |f| %>  
<%= error_messages_for(:content, :object => content.attachments ? [content.attachments, content] : content) %>
<div class="lesson">
    <%= f.label(:title, 'Lesson Title') %>
    <%= f.text_field :title, :class => "text single" %>
    <%= f.label(:teaser, "Lesson Teaser") %>
    <%= f.text_area(:teaser, :rows => 7, :cols => 70, :class => "text medium") %>
    <%= f.label(:body, 'Lesson Body') %>
    <%= f.text_area(:body, :rows => 25, :cols => 82, :mce_editable => "true", :class => "text large") %>
</div>


<%= f.label(:content_attachment, "Attachments") %>
<span id="attachments">
</span><br/>

<input type="button" value="Add Attachment" onclick="addAttachment()">

<%= f.label(:content_flash_video, "Video") %>
<%= f.file_field :content_flash_video %>

<div>
    <span class="draft plus_label"><%= f.check_box :draft %>
        <%= f.label :draft, 'Draft?' %>
    </span>
	
    <span class="draft plus_label">
    	<%= f.radio_button(:access_level, "Public") %>
        <%= f.label :access_level, 'Public' %>
    </span>
	<span class="draft plus_label">
		<%= f.radio_button :access_level, "Registered" %>
        <%= f.label :access_level, 'Registered' %>
    </span>
    <span class="draft plus_label">
    	<%= f.radio_button :access_level, "Premium" %>
        <%= f.label :access_level, 'Premium' %>
    </span>	
	
</div>
<% end %>      
